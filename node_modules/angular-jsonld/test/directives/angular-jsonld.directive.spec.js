/* global beforeEach, describe, expect, inject, it */

'use strict';

describe('jsonld directive', function() {
  var $compile;
  var $rootScope;
  var json;

  beforeEach(module('sb-jsonld'));

  beforeEach(inject(function(_$compile_, _$rootScope_) {
    $compile = _$compile_;
    $rootScope = _$rootScope_;

    json = {
      test: 'test'
    };

    $rootScope.json = json;
  }));



  it('should replace the directive element with a lp+json script', function() {
    var element =
      $compile('<sb-jsonld json="{{ json }}"></sb-jsonld>')($rootScope);

    $rootScope.$digest();

    expect(element[0].tagName).toEqual('SCRIPT');
    expect(element[0].textContent).toEqual(JSON.stringify(json));
    expect(element[0].type).toEqual('application/ld+json');
  });
});
