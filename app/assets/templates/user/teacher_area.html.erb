<span us-spinner spinner-key="spinner-1"></span>



<script src="https://apis.google.com/js/client.js?onload=checkAuth"></script>
    
    <!-- <pre id="output"></pre> -->


<md-content class="md-padding" layout-xs="column" layout="row">

  

  <md-card md-theme="{{ showDarkTheme ? 'dark-grey' : 'default' }}" md-theme-watch>
    <md-card-title>
      <md-card-title-text>
        <span class="md-headline">Your calendar</span>
        <span class="md-subhead">View and manage your lessons</span>
      </md-card-title-text>
      <md-card-title-media>
        <div class="btn-group">
            <button type="button" class="btn btn-default" ng-class="{active:mode==='month'}"
                    ng-click="changeMode('month')">
                Month
            </button>
            <button type="button" class="btn btn-default" ng-class="{active:mode==='week'}"
                    ng-click="changeMode('week')">
                Week
            </button>
            <button type="button" class="btn btn-default" ng-class="{active:mode==='day'}"
                    ng-click="changeMode('day')">
                Day
            </button>
        </div>
        <div class="btn-group">
            <button type="button" class="btn btn-default" ng-disabled="isToday()"
                    ng-click="today()">
                Today
            </button>
        </div>
        <calendar id="calendar" ng-model="currentDate" ui-calendar
                            calendar-mode="mode" event-source="eventSource"
                            range-changed="reloadSource(startTime, endTime)"
                            event-selected="onEventSelected(event)"
                            time-selected="onTimeSelected(selectedTime)"
                            ></calendar>
      </md-card-title-media>
    </md-card-title>
    <md-card-actions layout="row" layout-align="end center">
      <md-button  ng-if="show_auth_button" aria-label="google" ng-click="handleAuthClick(event)">
        <%= image_tag('google_sign_in.png')  %>
      </md-button>
      <md-button ng-if="!USER.calendar_id" ng-click="create_calendar()">Create calendar</md-button>
    </md-card-actions>
  </md-card>

</md-content>

{{ eventSource }}